CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table sync_engine_anchor if exists
drop table sync_engine_changelog if exists
drop table sync_engine_recordmap if exists
create table sync_engine_anchor (id bigint generated by default as identity (start with 1), target varchar(255), last_sync varchar(255), next_sync varchar(255), primary key (id), unique (target))
create table sync_engine_changelog (id bigint generated by default as identity (start with 1), target varchar(255) not null, node_id varchar(255) not null, record_id varchar(255) not null, operation varchar(255) not null, primary key (id))
create table sync_engine_recordmap (id bigint generated by default as identity (start with 1), source varchar(255) not null, target varchar(255) not null, guid varchar(255) not null, luid varchar(255) not null, primary key (id))
SET AUTOCOMMIT FALSE
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table services_channel_lastscan_timestamp if exists
create table services_channel_lastscan_timestamp (id bigint generated by default as identity (start with 1), clientId varchar(255) not null, channel varchar(255) not null, timestamp timestamp not null, primary key (id))
SET AUTOCOMMIT FALSE
/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table openmobster_device if exists
drop table openmobster_device_attribute if exists
drop table openmobster_device_attributes if exists
drop table openmobster_group if exists
drop table openmobster_group_attribute if exists
drop table openmobster_group_attributes if exists
drop table openmobster_identity if exists
drop table openmobster_identity_attribute if exists
drop table openmobster_identity_attributes if exists
drop table openmobster_identity_group if exists
create table openmobster_device (deviceId bigint generated by default as identity (start with 1), identifier varchar(255) not null, identityId bigint not null, primary key (deviceId), unique (identifier), unique (identityId))
create table openmobster_device_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_device_attributes (deviceId bigint not null, elt bigint not null, primary key (deviceId, elt), unique (elt))
create table openmobster_group (groupId bigint generated by default as identity (start with 1), name varchar(255) not null, primary key (groupId), unique (name))
create table openmobster_group_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_group_attributes (groupId bigint not null, elt bigint not null, primary key (groupId, elt), unique (elt))
create table openmobster_identity (identityId bigint generated by default as identity (start with 1), principal varchar(255) not null, credential varchar(255) not null, primary key (identityId), unique (principal))
create table openmobster_identity_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_identity_attributes (identityId bigint not null, elt bigint not null, primary key (identityId, elt), unique (elt))
create table openmobster_identity_group (identityId bigint not null, groupId bigint not null, primary key (groupId, identityId))
alter table openmobster_device add constraint FK4FCAC6B12DF66534 foreign key (identityId) references openmobster_identity
alter table openmobster_device_attributes add constraint FKDEBCCFA57674144C foreign key (deviceId) references openmobster_device
alter table openmobster_device_attributes add constraint FKDEBCCFA5F2AA232E foreign key (elt) references openmobster_device_attribute
alter table openmobster_group_attributes add constraint FKA46F85B2CD4AA55C foreign key (groupId) references openmobster_group
alter table openmobster_group_attributes add constraint FKA46F85B28BD71FE7 foreign key (elt) references openmobster_group_attribute
alter table openmobster_identity_attributes add constraint FKB77E4EFDC3C9BAAE foreign key (elt) references openmobster_identity_attribute
alter table openmobster_identity_attributes add constraint FKB77E4EFD2DF66534 foreign key (identityId) references openmobster_identity
alter table openmobster_identity_group add constraint FK7C3CE119CD4AA55C foreign key (groupId) references openmobster_group
alter table openmobster_identity_group add constraint FK7C3CE1192DF66534 foreign key (identityId) references openmobster_identity
SET AUTOCOMMIT FALSE
DISCONNECT
/*C2*/DISCONNECT
/*C1*/DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table sync_engine_anchor if exists
drop table sync_engine_changelog if exists
drop table sync_engine_recordmap if exists
create table sync_engine_anchor (id bigint generated by default as identity (start with 1), target varchar(255), last_sync varchar(255), next_sync varchar(255), primary key (id), unique (target))
create table sync_engine_changelog (id bigint generated by default as identity (start with 1), target varchar(255) not null, node_id varchar(255) not null, record_id varchar(255) not null, operation varchar(255) not null, primary key (id))
create table sync_engine_recordmap (id bigint generated by default as identity (start with 1), source varchar(255) not null, target varchar(255) not null, guid varchar(255) not null, luid varchar(255) not null, primary key (id))
SET AUTOCOMMIT FALSE
/*C5*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table services_channel_lastscan_timestamp if exists
create table services_channel_lastscan_timestamp (id bigint generated by default as identity (start with 1), clientId varchar(255) not null, channel varchar(255) not null, timestamp timestamp not null, primary key (id))
SET AUTOCOMMIT FALSE
/*C6*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
alter table openmobster_device drop constraint FK4FCAC6B12DF66534
alter table openmobster_device_attributes drop constraint FKDEBCCFA57674144C
alter table openmobster_device_attributes drop constraint FKDEBCCFA5F2AA232E
alter table openmobster_group_attributes drop constraint FKA46F85B2CD4AA55C
alter table openmobster_group_attributes drop constraint FKA46F85B28BD71FE7
alter table openmobster_identity_attributes drop constraint FKB77E4EFDC3C9BAAE
alter table openmobster_identity_attributes drop constraint FKB77E4EFD2DF66534
alter table openmobster_identity_group drop constraint FK7C3CE119CD4AA55C
alter table openmobster_identity_group drop constraint FK7C3CE1192DF66534
drop table openmobster_device if exists
drop table openmobster_device_attribute if exists
drop table openmobster_device_attributes if exists
drop table openmobster_group if exists
drop table openmobster_group_attribute if exists
drop table openmobster_group_attributes if exists
drop table openmobster_identity if exists
drop table openmobster_identity_attribute if exists
drop table openmobster_identity_attributes if exists
drop table openmobster_identity_group if exists
create table openmobster_device (deviceId bigint generated by default as identity (start with 1), identifier varchar(255) not null, identityId bigint not null, primary key (deviceId), unique (identifier), unique (identityId))
create table openmobster_device_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_device_attributes (deviceId bigint not null, elt bigint not null, primary key (deviceId, elt), unique (elt))
create table openmobster_group (groupId bigint generated by default as identity (start with 1), name varchar(255) not null, primary key (groupId), unique (name))
create table openmobster_group_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
