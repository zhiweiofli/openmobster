CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table openmobster_mobletApp if exists
create table openmobster_mobletApp (id bigint generated by default as identity (start with 1), uri varchar(255) not null, name varchar(255) not null, description varchar(255) not null, binaryLocation varchar(255) not null, configLocation varchar(255) not null, primary key (id), unique (uri))
SET AUTOCOMMIT FALSE
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table openmobster_device if exists
drop table openmobster_device_attribute if exists
drop table openmobster_device_attributes if exists
drop table openmobster_group if exists
drop table openmobster_group_attribute if exists
drop table openmobster_group_attributes if exists
drop table openmobster_identity if exists
drop table openmobster_identity_attribute if exists
drop table openmobster_identity_attributes if exists
drop table openmobster_identity_group if exists
create table openmobster_device (deviceId bigint generated by default as identity (start with 1), identifier varchar(255) not null, identityId bigint not null, primary key (deviceId), unique (identifier), unique (identityId))
create table openmobster_device_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_device_attributes (deviceId bigint not null, elt bigint not null, primary key (deviceId, elt), unique (elt))
create table openmobster_group (groupId bigint generated by default as identity (start with 1), name varchar(255) not null, primary key (groupId), unique (name))
create table openmobster_group_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_group_attributes (groupId bigint not null, elt bigint not null, primary key (groupId, elt), unique (elt))
create table openmobster_identity (identityId bigint generated by default as identity (start with 1), principal varchar(255) not null, credential varchar(255) not null, primary key (identityId), unique (principal))
create table openmobster_identity_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_identity_attributes (identityId bigint not null, elt bigint not null, primary key (identityId, elt), unique (elt))
create table openmobster_identity_group (identityId bigint not null, groupId bigint not null, primary key (groupId, identityId))
alter table openmobster_device add constraint FK4FCAC6B12DF66534 foreign key (identityId) references openmobster_identity
alter table openmobster_device_attributes add constraint FKDEBCCFA57674144C foreign key (deviceId) references openmobster_device
alter table openmobster_device_attributes add constraint FKDEBCCFA5F2AA232E foreign key (elt) references openmobster_device_attribute
alter table openmobster_group_attributes add constraint FKA46F85B2CD4AA55C foreign key (groupId) references openmobster_group
alter table openmobster_group_attributes add constraint FKA46F85B28BD71FE7 foreign key (elt) references openmobster_group_attribute
alter table openmobster_identity_attributes add constraint FKB77E4EFDC3C9BAAE foreign key (elt) references openmobster_identity_attribute
alter table openmobster_identity_attributes add constraint FKB77E4EFD2DF66534 foreign key (identityId) references openmobster_identity
alter table openmobster_identity_group add constraint FK7C3CE119CD4AA55C foreign key (groupId) references openmobster_group
alter table openmobster_identity_group add constraint FK7C3CE1192DF66534 foreign key (identityId) references openmobster_identity
SET AUTOCOMMIT FALSE
/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table services_channel_lastscan_timestamp if exists
create table services_channel_lastscan_timestamp (id bigint generated by default as identity (start with 1), clientId varchar(255) not null, channel varchar(255) not null, timestamp timestamp not null, primary key (id))
SET AUTOCOMMIT FALSE
/*C1*/INSERT INTO OPENMOBSTER_MOBLETAPP VALUES(1,'testapp','TestApp','TestApp used for testing Moblet Provisioning','/rimos-4.3.0/testapp.cod','/rimos-4.3.0/testapp.jad')
COMMIT
INSERT INTO OPENMOBSTER_MOBLETAPP VALUES(2,'testapp2','TestApp2','TestApp2 used for testing Moblet Provisioning','/rimos-4.3.0/testapp2.cod','/rimos-4.3.0/testapp2.jad')
COMMIT
/*C3*/DISCONNECT
/*C2*/DISCONNECT
/*C1*/DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
drop table openmobster_mobletApp if exists
create table openmobster_mobletApp (id bigint generated by default as identity (start with 1), uri varchar(255) not null, name varchar(255) not null, description varchar(255) not null, binaryLocation varchar(255) not null, configLocation varchar(255) not null, primary key (id), unique (uri))
SET AUTOCOMMIT FALSE
/*C5*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
alter table openmobster_device drop constraint FK4FCAC6B12DF66534
alter table openmobster_device_attributes drop constraint FKDEBCCFA57674144C
alter table openmobster_device_attributes drop constraint FKDEBCCFA5F2AA232E
alter table openmobster_group_attributes drop constraint FKA46F85B2CD4AA55C
alter table openmobster_group_attributes drop constraint FKA46F85B28BD71FE7
alter table openmobster_identity_attributes drop constraint FKB77E4EFDC3C9BAAE
alter table openmobster_identity_attributes drop constraint FKB77E4EFD2DF66534
alter table openmobster_identity_group drop constraint FK7C3CE119CD4AA55C
alter table openmobster_identity_group drop constraint FK7C3CE1192DF66534
drop table openmobster_device if exists
drop table openmobster_device_attribute if exists
drop table openmobster_device_attributes if exists
drop table openmobster_group if exists
drop table openmobster_group_attribute if exists
drop table openmobster_group_attributes if exists
drop table openmobster_identity if exists
drop table openmobster_identity_attribute if exists
drop table openmobster_identity_attributes if exists
drop table openmobster_identity_group if exists
create table openmobster_device (deviceId bigint generated by default as identity (start with 1), identifier varchar(255) not null, identityId bigint not null, primary key (deviceId), unique (identifier), unique (identityId))
create table openmobster_device_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_device_attributes (deviceId bigint not null, elt bigint not null, primary key (deviceId, elt), unique (elt))
create table openmobster_group (groupId bigint generated by default as identity (start with 1), name varchar(255) not null, primary key (groupId), unique (name))
create table openmobster_group_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_group_attributes (groupId bigint not null, elt bigint not null, primary key (groupId, elt), unique (elt))
create table openmobster_identity (identityId bigint generated by default as identity (start with 1), principal varchar(255) not null, credential varchar(255) not null, primary key (identityId), unique (principal))
create table openmobster_identity_attribute (attributeId bigint generated by default as identity (start with 1), name varchar(255) not null, value varchar(255) not null, primary key (attributeId))
create table openmobster_identity_attributes (identityId bigint not null, elt bigint not null, primary key (identityId, elt), unique (elt))
create table openmobster_identity_group (identityId bigint not null, groupId bigint not null, primary key (groupId, identityId))
alter table openmobster_device add constraint FK4FCAC6B12DF66534 foreign key (identityId) references openmobster_identity
